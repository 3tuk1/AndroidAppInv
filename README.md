# Stock Manager

## 概要

**Stock Manager**は、日々の在庫管理を効率化し、消費傾向を分析することで無駄な支出を削減することを目的としたAndroidアプリケーションです。直感的なUIを通じて、商品の登録、消費履歴の追跡、購入計画の立案をサポートします。

このアプリケーションは、家庭内の食料品や日用品の在庫を管理し、何がいつ消費され、次に何を購入すべきかを可視化することで、計画的な消費生活を支援します。

## アプリのプロトタイプ
![プロトタイプ](https://github.com/user-attachments/assets/d3cf78d4-7c1f-46aa-aff6-0be6929271c8)

## UML図
![app](https://github.com/user-attachments/assets/a7c62139-1078-4bba-8245-63fd5e096d5a)

## 主な機能

本アプリケーションは、以下の主要な機能を備えています。

### 在庫管理

  * **商品一覧**: 現在の在庫商品を一覧で確認できます。各商品には画像、名称、数量などが表示されます。
  * **商品登録・編集**:
      * バーコードスキャンによる迅速な商品情報検索・登録が可能です。 スキャンしたバーコードに紐づく商品が既に存在する場合、編集モードで画面が開きます。
      * 商品名、価格、数量、保管場所、賞味期限、画像などを手動で登録・編集できます。
      * カメラで撮影した写真をトリミングして商品画像として設定できます。
  * **商品削除**: 在庫商品を論理削除（在庫数を0に更新）し、購入リストへ自動で追加します。

### 消費・購入分析

  * **消費ペース分析**: 過去の消費履歴に基づき、商品ごとの平均消費ペース（1個あたり何日で消費するか）を自動で計算します。
  * **在庫枯渇予測**: 現在の在庫数と消費ペースから、在庫が尽きるまでの残り日数と具体的な枯渇予想日を算出します。
  * **購入推奨**: 分析結果に基づき、推奨される購入個数を提案します。

### 購入サポート

  * **買い物リスト**:
      * 手動での追加はもちろん、在庫が0になった商品や、消費分析によって当月中に在庫切れが予測される商品が自動でリストに追加されます。
      * リスト内の商品は長押しで削除できます。
  * **購入後の自動更新**: 購入リストに掲載されている商品が在庫に補充されると、特定の条件下（例：推奨在庫量を満たす）でリストから自動的に削除されます。

### データ可視化と履歴

  * **支出の可視化**: 「購入」「消費」「廃棄」といった項目ごとに月間の合計金額を算出し、円グラフで内訳を可視化します。現在の在庫総額も確認できます。
  * **履歴追跡**: 商品の「購入」「消費」「削除」といった操作はすべて日付と共に履歴として記録され、いつでも確認できます。
  * **カレンダー表示**: 日付ごとのイベントをカレンダー形式で確認できるインターフェースを備えています。

## アーキテクチャ

このアプリケーションは、**MVVM (Model-View-ViewModel)** アーキテクチャを採用しています。UI（View）、UIロジックと状態管理（ViewModel）、ビジネスロジック（UseCase）、データアクセス（Repository）を分離することで、各コンポーネントの独立性を高め、テストの容易性やメンテナンス性を向上させています。

  * **View**: `Activity` や `Fragment` で構成され、ユーザーインタフェースの表示とユーザー操作の通知を担当します。
  * **ViewModel**: View の状態を保持し、ビジネスロジックの実行を UseCase に依頼します。`LiveData` を通じてUIの更新を行います。
  * **UseCase**: アプリケーション固有の複雑なビジネスロジックを担当します。複数のRepositoryを組み合わせて特定の機能を実現します。
  * **Repository**: データベースやネットワークなど、データの取得・永続化に関する責務を担います。
  * **Model**: `Room` のエンティティとして定義され、アプリケーションで扱うデータを表現します。
  * **Dependency Injection**: `Injector` オブジェクトによる手動DI（Dependency Injection）パターンを採用し、各コンポーネントの依存関係を解決しています。

## 使用技術

  * **言語**
      * Kotlin
      * Java
  * **Android Jetpack**
      * **Architecture Components**: ViewModel, LiveData, Room Persistence Library
      * **UI**: Fragment, RecyclerView, ViewPager2
      * **CameraX**: カメラ機能の実装
  * **非同期処理**
      * Kotlin Coroutines
  * **外部ライブラリ**
      * **Kizitonwose Calendar**: 高機能なカレンダーUIの実装
      * **ML Kit Vision**: バーコードスキャン機能の実装
      * **CanHub Image Cropper**: 画像のトリミング機能の実装
      * **Material Components for Android**: モダンなUIデザインの実現
  * **ビルドシステム**
      * Gradle (Version 8.11.1)

## セットアップ

1.  このリポジトリをクローンします。
2.  Android Studioでプロジェクトを開きます。
3.  Gradleの同期が完了したら、ビルドして実行します。

特別なAPIキーや設定は不要です。

## プロジェクト構造 (主要なファイル)

```
app
├── src
│   ├── main
│   │   ├── java/com/inv/inventryapp
│   │   │   ├── di               # 依存性注入(DI)関連
│   │   │   │   └── Injector.kt
│   │   │   ├── model            # データ層 (Roomエンティティ、DAO、データベース)
│   │   │   │   ├── dao
│   │   │   │   ├── dto
│   │   │   │   ├── entity
│   │   │   │   └── ModelDatabase.kt
│   │   │   ├── repository       # データソースへのアクセスを抽象化
│   │   │   │   ├── ProductRepository.java
│   │   │   │   └── ...
│   │   │   ├── usecase          # ビジネスロジック
│   │   │   │   └── ConsumptionAnalysisUseCase.java
│   │   │   └── view             # UI層 (Activity, Fragment)
│   │   │       ├── analysis     # 分析画面
│   │   │       ├── camera       # カメラ関連
│   │   │       ├── chart        # グラフ関連
│   │   │       ├── home         # ホーム画面
│   │   │       └── ...
│   │   └── res
│   │       ├── layout           # レイアウトXMLファイル
│   │       ├── menu             # メニューXMLファイル
│   │       └── navigation       # ナビゲーショングラフ
│   └── test                     # ユニットテスト
└── build.gradle
```
